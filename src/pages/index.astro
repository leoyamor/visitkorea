---
import BaseLayout from "../layouts/BaseLayout.astro";
import TreePage from "../components/TreePage.astro";
import { siteTree } from "../data/siteTree";
import { parseLang, withLang } from "../lib/i18n";
import { absoluteUrl } from "../lib/site";

const node = siteTree;
const segments: string[] = [];
const lang = parseLang(Astro.url.searchParams.get("lang"));
const pageTitle = lang === "es" ? "Planificador de viaje a Corea" : "Visit Korea Planner";
const pageDescription =
  lang === "es"
    ? "Guía práctica para planear tu viaje a Corea con claridad y confianza."
    : "Practical, beginner-friendly guidance for foreigners planning a trip to Korea.";
const canonicalUrl = absoluteUrl(withLang("/", lang));
const alternateEnUrl = absoluteUrl("/");
const alternateEsUrl = absoluteUrl(withLang("/", "es"));
---

<BaseLayout
  title={pageTitle}
  description={pageDescription}
  bodyClass="home-bg"
  lang={lang}
  canonicalUrl={canonicalUrl}
  alternateEnUrl={alternateEnUrl}
  alternateEsUrl={alternateEsUrl}
>
  <TreePage node={node} segments={segments} parentPath="/" isHome lang={lang} />
</BaseLayout>
